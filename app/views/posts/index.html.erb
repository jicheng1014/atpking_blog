<div class="px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8">
  <div class="flex items-center justify-between mb-8">
    <h1 class="text-3xl font-bold">
      <% if @tag %>
        标签：<%= @tag.name %>
      <% else %>
        文章
      <% end %>
    </h1>
    <% if current_user %>
      <%= link_to '写新文章', new_admin_post_path, class: 'bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md' %>
    <% end %>
  </div>
  <div class="mb-8">
    <% if @tag %>
      <p>
        显示标签为 "<%= @tag.name %>" 的文章
        <%= link_to '查看全部文章', posts_path, class: 'text-blue-500 hover:text-blue-700' %>
      </p>
    <% else %>
      <p>这里记录了我的点点滴滴</p>
    <% end %>
  </div>

  <div class="">
    <% @posts.each do |post| %>
      <article class="mb-6 overflow-hidden transition-all duration-300 ease-in-out transform bg-white rounded-lg hover:-translate-y-1 hover:shadow-lg">
        <div class="p-6">
          <h2 class="mb-2 text-xl font-semibold">
            <%= link_to post.title, post_path(post), class: "hover:text-blue-500 hover:decoration-dashed hover:underline hover:underline-offset-4" %>
          </h2>
          <div class="mb-4 prose text-gray-600 max-w-none"><%= truncate(strip_tags(post.rendered_content), length: 150) %></div>
          <div class="flex items-center justify-between text-sm">
            <div class="flex flex-wrap -ml-1">
              <% post.tags.each do |tag| %>
                <%= link_to posts_path(tag: tag.slug), class: "mr-3 mb-1 inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors duration-200" do %>
                  <svg class="w-3 h-3 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A2 2 0 013 12V7a4 4 0 014-4z" />
                  </svg>
                  <%= tag.name %>
                <% end %>
              <% end %>
            </div>
            <span class="text-gray-500 ml-4 shrink-0"><%= post.created_at.strftime("%Y-%m-%d") %></span>
          </div>
        </div>
      </article>
    <% end %>
  </div>
</div>